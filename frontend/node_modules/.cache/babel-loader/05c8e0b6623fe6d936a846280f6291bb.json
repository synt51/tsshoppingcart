{"ast":null,"code":"export default function homeController() {\n  const STORAGE_KEY = 'ts_shopping_cart';\n  const re = new RegExp(/\\s/g);\n  let items = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};\n\n  const setItems = value => {\n    items = value;\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n  };\n\n  const isValidName = value => {\n    return !!(value && !re.test(value));\n  };\n\n  return {\n    getItems: () => ({ ...items\n    }),\n    addItem: (newItem, quantity) => {\n      if (isValidName(newItem)) {\n        const temp = { ...items\n        };\n        temp[newItem] = (temp[newItem] ? temp[newItem] : 0) + parseInt(String(quantity));\n        setItems(temp);\n      }\n\n      return { ...items\n      };\n    },\n    removeItem: item => {\n      const temp = { ...items\n      };\n      temp[item] > 0 ? delete temp[item] : temp[item]--;\n      setItems(temp);\n      return { ...items\n      };\n    },\n    decreaseItem: item => {\n      const temp = { ...items\n      };\n      temp[item] <= 1 ? delete temp[item] : temp[item]--;\n      setItems(temp);\n      return { ...items\n      };\n    },\n    changeItem: (oldName, newName) => {\n      if (isValidName(newName) && !(newName === oldName)) {\n        const temp = { ...items\n        };\n        temp[newName] = temp[oldName];\n        delete temp[oldName];\n        setItems(temp);\n      }\n\n      return { ...items\n      };\n    }\n  };\n}","map":{"version":3,"sources":["/Users/heinzschlomer/Desktop/neueFische/Aufgaben/Vierte Woche/tsshoppinglist/src/controller/homeController.ts"],"names":["homeController","STORAGE_KEY","re","RegExp","items","JSON","parse","localStorage","getItem","setItems","value","setItem","stringify","isValidName","test","getItems","addItem","newItem","quantity","temp","parseInt","String","removeItem","item","decreaseItem","changeItem","oldName","newName"],"mappings":"AAWA,eAAe,SAASA,cAAT,GAA2C;AACtD,QAAMC,WAAmB,GAAG,kBAA5B;AACA,QAAMC,EAAU,GAAG,IAAIC,MAAJ,CAAW,KAAX,CAAnB;AACA,MAAIC,KAAa,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBP,WAArB,CAAX,KAAkD,EAAtE;;AAEA,QAAMQ,QAAQ,GAAIC,KAAD,IAAmB;AAChCN,IAAAA,KAAK,GAAGM,KAAR;AACAH,IAAAA,YAAY,CAACI,OAAb,CAAqBV,WAArB,EAAkCI,IAAI,CAACO,SAAL,CAAeR,KAAf,CAAlC;AACH,GAHD;;AAKA,QAAMS,WAAW,GAAIH,KAAD,IAA4B;AAC5C,WAAO,CAAC,EAAEA,KAAK,IAAI,CAACR,EAAE,CAACY,IAAH,CAAQJ,KAAR,CAAZ,CAAR;AACH,GAFD;;AAIA,SAAO;AACHK,IAAAA,QAAQ,EAAE,OAAe,EAAC,GAAGX;AAAJ,KAAf,CADP;AAEHY,IAAAA,OAAO,EAAE,CAACC,OAAD,EAAUC,QAAV,KAA+B;AACpC,UAAIL,WAAW,CAACI,OAAD,CAAf,EAA0B;AACtB,cAAME,IAAY,GAAG,EAAC,GAAGf;AAAJ,SAArB;AACAe,QAAAA,IAAI,CAACF,OAAD,CAAJ,GAAiB,CAACE,IAAI,CAACF,OAAD,CAAJ,GAAgBE,IAAI,CAACF,OAAD,CAApB,GAAgC,CAAjC,IAAsCG,QAAQ,CAACC,MAAM,CAACH,QAAD,CAAP,CAA/D;AACAT,QAAAA,QAAQ,CAACU,IAAD,CAAR;AACH;;AACD,aAAO,EAAC,GAAGf;AAAJ,OAAP;AACH,KATE;AAWHkB,IAAAA,UAAU,EAAGC,IAAD,IAA0B;AAClC,YAAMJ,IAAY,GAAG,EAAC,GAAGf;AAAJ,OAArB;AACAe,MAAAA,IAAI,CAACI,IAAD,CAAJ,GAAa,CAAb,GAAiB,OAAOJ,IAAI,CAACI,IAAD,CAA5B,GAAqCJ,IAAI,CAACI,IAAD,CAAJ,EAArC;AACAd,MAAAA,QAAQ,CAACU,IAAD,CAAR;AACA,aAAO,EAAC,GAAGf;AAAJ,OAAP;AACH,KAhBE;AAkBHoB,IAAAA,YAAY,EAAGD,IAAD,IAA0B;AACpC,YAAMJ,IAAY,GAAG,EAAC,GAAGf;AAAJ,OAArB;AACAe,MAAAA,IAAI,CAACI,IAAD,CAAJ,IAAc,CAAd,GAAkB,OAAOJ,IAAI,CAACI,IAAD,CAA7B,GAAsCJ,IAAI,CAACI,IAAD,CAAJ,EAAtC;AACAd,MAAAA,QAAQ,CAACU,IAAD,CAAR;AACA,aAAO,EAAC,GAAGf;AAAJ,OAAP;AACH,KAvBE;AAyBHqB,IAAAA,UAAU,EAAE,CAACC,OAAD,EAAkBC,OAAlB,KAA8C;AACtD,UAAId,WAAW,CAACc,OAAD,CAAX,IAAwB,EAAEA,OAAO,KAAKD,OAAd,CAA5B,EAAoD;AAChD,cAAMP,IAAY,GAAG,EAAC,GAAGf;AAAJ,SAArB;AACAe,QAAAA,IAAI,CAACQ,OAAD,CAAJ,GAAgBR,IAAI,CAACO,OAAD,CAApB;AACA,eAAOP,IAAI,CAACO,OAAD,CAAX;AACAjB,QAAAA,QAAQ,CAACU,IAAD,CAAR;AACH;;AACD,aAAO,EAAC,GAAGf;AAAJ,OAAP;AACH;AAjCE,GAAP;AAoCH","sourcesContent":["import {IItems} from \"../models/ShoppingItems\";\n\nexport interface IHomeController {\n    getItems: () => IItems,\n    addItem: (newItem: string, quantity: number) => IItems,\n    removeItem: (item: string) => IItems,\n    decreaseItem: (item: string) => IItems,\n    changeItem: (oldName: string, newName: string) => IItems,\n    //removeList: () => IItems\n}\n\nexport default function homeController(): IHomeController {\n    const STORAGE_KEY: string = 'ts_shopping_cart'\n    const re: RegExp = new RegExp(/\\s/g)\n    let items: IItems = JSON.parse(localStorage.getItem(STORAGE_KEY)!) || {}\n\n    const setItems = (value: IItems) => {\n        items = value\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(items))\n    }\n\n    const isValidName = (value: string): boolean => {\n        return !!(value && !re.test(value))\n    }\n\n    return {\n        getItems: (): IItems => ({...items}),\n        addItem: (newItem, quantity): IItems => {\n            if (isValidName(newItem)) {\n                const temp: IItems = {...items}\n                temp[newItem] = ((temp[newItem] ? temp[newItem] : 0) + parseInt(String(quantity)))\n                setItems(temp)\n            }\n            return {...items}\n        },\n\n        removeItem: (item: string): IItems => {\n            const temp: IItems = {...items}\n            temp[item] > 0 ? delete temp[item] : temp[item]--\n            setItems(temp)\n            return {...items}\n        },\n\n        decreaseItem: (item: string): IItems => {\n            const temp: IItems = {...items}\n            temp[item] <= 1 ? delete temp[item] : temp[item]--\n            setItems(temp)\n            return {...items}\n        },\n\n        changeItem: (oldName: string, newName: string): IItems => {\n            if (isValidName(newName) && !(newName === oldName)) {\n                const temp: IItems = {...items}\n                temp[newName] = temp[oldName]\n                delete temp[oldName]\n                setItems(temp)\n            }\n            return {...items}\n        },\n\n    };\n}"]},"metadata":{},"sourceType":"module"}