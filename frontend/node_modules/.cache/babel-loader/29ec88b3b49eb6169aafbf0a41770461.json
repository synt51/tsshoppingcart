{"ast":null,"code":"export default function homeController() {\n  const STORAGE_KEY = 'ts_shopping_cart';\n  const re = new RegExp(/\\s/g);\n  let items = JSON.parse(localStorage.getItem(STORAGE_KEY)) || {};\n\n  const setItems = value => {\n    items = value;\n    localStorage.setItem(STORAGE_KEY, JSON.stringify(items));\n  };\n\n  const isValidName = value => {\n    return !!(value && !re.test(value));\n  };\n\n  return {\n    getItems: () => items,\n    addItem: newItem => {\n      if (isValidName(newItem)) {\n        const temp = { ...items\n        };\n        temp[newItem] = temp[newItem] ? temp[newItem] + 1 : 1;\n        setItems(temp);\n      }\n\n      return { ...items\n      };\n    },\n    decreaseItem: item => {\n      const temp = { ...items\n      };\n      temp[item] <= 1 ? delete temp[item] : temp[item]--;\n      setItems(temp);\n      return { ...items\n      };\n    },\n    removeItem: item => {\n      const temp = { ...items\n      };\n      delete temp[item];\n      setItems(temp);\n      return { ...items\n      };\n    },\n    changeItem: (oldName, newName) => {\n      if (isValidName(newName) && !(newName === oldName)) {\n        const temp = { ...items\n        };\n        temp[newName] = temp[oldName];\n        delete temp[oldName];\n        setItems(temp);\n      }\n\n      return { ...items\n      };\n    }\n  };\n}","map":{"version":3,"sources":["/Users/heinzschlomer/Desktop/neueFische/Aufgaben/Vierte Woche/tsshoppinglist/src/controller/HomeController.ts"],"names":["homeController","STORAGE_KEY","re","RegExp","items","JSON","parse","localStorage","getItem","setItems","value","setItem","stringify","isValidName","test","getItems","addItem","newItem","temp","decreaseItem","item","removeItem","changeItem","oldName","newName"],"mappings":"AAYA,eAAe,SAASA,cAAT,GAA0B;AAErC,QAAMC,WAAmB,GAAG,kBAA5B;AACA,QAAMC,EAAU,GAAG,IAAIC,MAAJ,CAAW,KAAX,CAAnB;AACA,MAAIC,KAAY,GAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqBP,WAArB,CAAX,KAAkD,EAArE;;AAEA,QAAMQ,QAAQ,GAAIC,KAAD,IAAkB;AAC/BN,IAAAA,KAAK,GAAGM,KAAR;AACAH,IAAAA,YAAY,CAACI,OAAb,CAAqBV,WAArB,EAAkCI,IAAI,CAACO,SAAL,CAAeR,KAAf,CAAlC;AACH,GAHD;;AAKA,QAAMS,WAAW,GAAIH,KAAD,IAA4B;AAC5C,WAAO,CAAC,EAAEA,KAAK,IAAI,CAACR,EAAE,CAACY,IAAH,CAAQJ,KAAR,CAAZ,CAAR;AACH,GAFD;;AAIA,SAAO;AACHK,IAAAA,QAAQ,EAAE,MAAaX,KADpB;AAGHY,IAAAA,OAAO,EAAGC,OAAD,IAA4B;AACjC,UAAIJ,WAAW,CAACI,OAAD,CAAf,EAA0B;AACtB,cAAMC,IAAW,GAAG,EAAC,GAAGd;AAAJ,SAApB;AACAc,QAAAA,IAAI,CAACD,OAAD,CAAJ,GAAgBC,IAAI,CAACD,OAAD,CAAJ,GAAgBC,IAAI,CAACD,OAAD,CAAJ,GAAe,CAA/B,GAAmC,CAAnD;AACAR,QAAAA,QAAQ,CAACS,IAAD,CAAR;AACH;;AACD,aAAO,EAAC,GAAGd;AAAJ,OAAP;AACH,KAVE;AAYHe,IAAAA,YAAY,EAAGC,IAAD,IAAyB;AACnC,YAAMF,IAAW,GAAG,EAAC,GAAGd;AAAJ,OAApB;AACAc,MAAAA,IAAI,CAACE,IAAD,CAAJ,IAAc,CAAd,GAAkB,OAAOF,IAAI,CAACE,IAAD,CAA7B,GAAsCF,IAAI,CAACE,IAAD,CAAJ,EAAtC;AACAX,MAAAA,QAAQ,CAACS,IAAD,CAAR;AACA,aAAO,EAAC,GAAGd;AAAJ,OAAP;AACH,KAjBE;AAmBHiB,IAAAA,UAAU,EAAGD,IAAD,IAAyB;AACjC,YAAMF,IAAW,GAAG,EAAC,GAAGd;AAAJ,OAApB;AACA,aAAOc,IAAI,CAACE,IAAD,CAAX;AACAX,MAAAA,QAAQ,CAACS,IAAD,CAAR;AACA,aAAO,EAAC,GAAGd;AAAJ,OAAP;AACH,KAxBE;AA0BHkB,IAAAA,UAAU,EAAE,CAACC,OAAD,EAAkBC,OAAlB,KAA6C;AACrD,UAAIX,WAAW,CAACW,OAAD,CAAX,IAAwB,EAAEA,OAAO,KAAKD,OAAd,CAA5B,EAAmD;AAC/C,cAAML,IAAI,GAAG,EAAC,GAAGd;AAAJ,SAAb;AACAc,QAAAA,IAAI,CAACM,OAAD,CAAJ,GAAgBN,IAAI,CAACK,OAAD,CAApB;AACA,eAAOL,IAAI,CAACK,OAAD,CAAX;AACAd,QAAAA,QAAQ,CAACS,IAAD,CAAR;AACH;;AACD,aAAO,EAAC,GAAGd;AAAJ,OAAP;AACH;AAlCE,GAAP;AAoCH","sourcesContent":["interface Items {\n    [n: string]: number\n}\n\nexport interface IHomeController {\n    getItems: () => Items,\n    addItems: (newItem: string) => Items,\n    removeItem: (item: string) => Items,\n    changeItem: (oldName: string, newName: string) => Items\n}\n\n\nexport default function homeController() {\n\n    const STORAGE_KEY: string = 'ts_shopping_cart'\n    const re: RegExp = new RegExp(/\\s/g)\n    let items: Items = JSON.parse(localStorage.getItem(STORAGE_KEY)!) || {}\n\n    const setItems = (value: Items) => {\n        items = value\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(items))\n    }\n\n    const isValidName = (value: string): boolean => {\n        return !!(value && !re.test(value))\n    }\n\n    return {\n        getItems: (): Items => items,\n\n        addItem: (newItem: string): Items => {\n            if (isValidName(newItem)) {\n                const temp: Items = {...items}\n                temp[newItem] = temp[newItem] ? temp[newItem] +1 : 1\n                setItems(temp)\n            }\n            return {...items}\n        },\n\n        decreaseItem: (item: string): Items => {\n            const temp: Items = {...items}\n            temp[item] <= 1 ? delete temp[item] : temp[item]--\n            setItems(temp)\n            return {...items}\n        },\n\n        removeItem: (item: string): Items => {\n            const temp: Items = {...items}\n            delete temp[item]\n            setItems(temp)\n            return {...items}\n        },\n\n        changeItem: (oldName: string, newName: string): Items => {\n            if (isValidName(newName) && !(newName === oldName)){\n                const temp = {...items}\n                temp[newName] = temp[oldName]\n                delete temp[oldName]\n                setItems(temp)\n            }\n            return {...items}\n        }\n    };\n}"]},"metadata":{},"sourceType":"module"}